{"remainingRequest":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/babel-loader/lib/index.js!/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/src/views/Flowchart.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/src/views/Flowchart.vue","mtime":1692538786626},{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/babel.config.js","mtime":1692538782442},{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/cache-loader/dist/cjs.js","mtime":1692538784112},{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/babel-loader/lib/index.js","mtime":1692538784047},{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/cache-loader/dist/cjs.js","mtime":1692538784112},{"path":"/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/node_modules/vue-loader-v16/dist/index.js","mtime":1692538786443}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQmFja2dyb3VuZCwgQ29udHJvbHMsIE1pbmlNYXAsIFZ1ZUZsb3csIGlzTm9kZSwgaXNFZGdlLCBNYXJrZXJUeXBlLCBDb25uZWN0aW9uTW9kZSwgdXNlVnVlRmxvdyB9IGZyb20gJ0BicmFrcy92dWUtZmxvdyc7CmltcG9ydCB7IG1hcmtSYXcsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBpbml0aWFsRWxlbWVudHMgfSBmcm9tICcuLi9qcy9pbml0aWFsLWVsZW1lbnRzLmpzJzsgLy/jgqvjgrnjgr/jg6Djg47jg7zjg4njga7ov73liqAKCmltcG9ydCBNYWtlTm9kZSBmcm9tICdAL2NvbXBvbmVudHMvTWFrZU5vZGUudnVlJzsKaW1wb3J0IE1vdGl2YXRpb25Ob2RlIGZyb20gJ0AvY29tcG9uZW50cy9Nb3RpdmF0aW9uTm9kZS52dWUnOwppbXBvcnQgU2Vhc29uTm9kZSBmcm9tICdAL2NvbXBvbmVudHMvU2Vhc29uTm9kZS52dWUnOwppbXBvcnQgVGltZU5vZGUgZnJvbSAnQC9jb21wb25lbnRzL1RpbWVOb2RlLnZ1ZSc7IC8v5a2Q44Kz44Oz44Od44O844ON44Oz44OI44Gu6L+95YqgCgppbXBvcnQgTm9kZVNldHRpbmdzIGZyb20gJ0AvY29tcG9uZW50cy9Ob2RlU2V0dGluZ3MudnVlJzsKaW1wb3J0IEZhY2VJbWFnZSBmcm9tICdAL2NvbXBvbmVudHMvRmFjZUltYWdlLnZ1ZSc7CmltcG9ydCBOb2RlRmllbGQgZnJvbSAnQC9jb21wb25lbnRzL05vZGVGaWVsZC52dWUnOwppbXBvcnQgVG9wTWVudSBmcm9tICdAL2NvbXBvbmVudHMvVG9wTWVudS52dWUnOyAvL+ODqeOCpOODluODqeODquOBrui/veWKoAoKaW1wb3J0IFZ1ZVNpbXBsZUNvbnRleHRNZW51IGZyb20gJ3Z1ZS1zaW1wbGUtY29udGV4dC1tZW51JzsKaW1wb3J0ICogYXMgaHRtbFRvSW1hZ2UgZnJvbSAiaHRtbC10by1pbWFnZSI7IC8v5Yid5pyf6Kit5a6aCgovKiB2dWUtZmxvd+OBruWIneacn+ioreWumiAqLwoKZXhwb3J0IGRlZmF1bHQgewogIF9fbmFtZTogJ0Zsb3djaGFydCcsCgogIHNldHVwKF9fcHJvcHMsIHsKICAgIGV4cG9zZQogIH0pIHsKICAgIGV4cG9zZSgpOwogICAgY29uc3QgewogICAgICBvblBhbmVSZWFkeSwKICAgICAgb25Db25uZWN0LAogICAgICBvbkVkZ2VzQ2hhbmdlLAogICAgICBvbk5vZGVzQ2hhbmdlLAogICAgICBhZGRFZGdlcywKICAgICAgYWRkTm9kZXMsCiAgICAgIHRvT2JqZWN0LAogICAgICBwcm9qZWN0LAogICAgICBnZXROb2RlLAogICAgICBnZXRFZGdlCiAgICB9ID0gdXNlVnVlRmxvdygpOwogICAgY29uc3QgZWxlbWVudHMgPSByZWYoaW5pdGlhbEVsZW1lbnRzKTsKICAgIGNvbnN0IG5vZGVUeXBlcyA9IHsKICAgICAgY3VzdG9tTWFrZTogbWFya1JhdyhNYWtlTm9kZSksCiAgICAgIGN1c3RvbU1vdGl2YXRpb246IG1hcmtSYXcoTW90aXZhdGlvbk5vZGUpLAogICAgICBjdXN0b21TZWFzb246IG1hcmtSYXcoU2Vhc29uTm9kZSksCiAgICAgIGN1c3RvbVRpbWU6IG1hcmtSYXcoVGltZU5vZGUpCiAgICB9OwogICAgLyogc3RvcmXjgahyb3V0ZXLjga7plovlp4sgKi8KCiAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIC8qIOODjuODvOODieOBrueuoeeQhuWkieaVsCAqLwoKICAgIHZhciBTa2V5cyA9IFtdOyAvL3NvdXJjZQoKICAgIHZhciBlZGdlU051bSA9IFtdOyAvL3NvdXJjZeOBi+OCieimi+OBn2VkZ2Xjga7ph43opIcgc291cmNlOltpZF0KCiAgICB2YXIgbWFrZU5vZGVOdW0gPSB7CiAgICAgIDA6IFtdLAogICAgICAxOiBbXSwKICAgICAgMjogW10sCiAgICAgIDM6IFtdLAogICAgICA0OiBbXSwKICAgICAgNTogW10sCiAgICAgIDY6IFtdLAogICAgICA3OiBbXQogICAgfTsgLy9pbWdOdW06W2lkXQoKICAgIC8qIHZ1ZS1zaW1wbGUtY29udGV4dC1tZW5144Gu5Yid5pyf6Kit5a6aICovCgogICAgY29uc3Qgb3B0aW9ucyA9IFt7CiAgICAgIG5hbWU6ICJDb3B5IiwKICAgICAgc2x1ZzogImNvcHkiCiAgICB9XTsKICAgIGNvbnN0IHZ1ZUNvbnRleHRNZW51ID0gcmVmKGluaXRpYWxFbGVtZW50cyk7CiAgICAvKiB2dWUtc2ltcGxlLWNvbnRleHQtbWVudeOBrumWouaVsCAqLwoKICAgIGNvbnN0IGhhbmRsZUNsaWNrID0gZXZlbnQgPT4gewogICAgICAvLyBvdmVyd3JpdGUgcmVhZG9ubHkgcHJvcGVydGllcyBwYWdlWCBhbmQgcGFnZVkgYW5kIHNldCBjb3JyZWN0IHZhbHVlcwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXZlbnQsICdwYWdlWCcsIHsKICAgICAgICB2YWx1ZTogZXZlbnQucGFnZVggLSAzNTAsCiAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShldmVudCwgJ3BhZ2VZJywgewogICAgICAgIHZhbHVlOiBldmVudC5wYWdlWSAtIDEwMCwKICAgICAgICAvL2V2ZW50LnBhZ2VZIC0gMTAwCiAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgfSk7CiAgICAgIHZ1ZUNvbnRleHRNZW51LnZhbHVlLnNob3dNZW51KGV2ZW50KTsKICAgIH07IC8v44Kz44Oz44OG44Kt44K544OI44Oh44OL44Ol44O844KS5ZG844Gz5Ye644GZCgoKICAgIGNvbnN0IHNlbGVjdE1lbnUgPSBwYXJhbXMgPT4gewogICAgICBzdG9yZS5jb21taXQoInNldFNlbGVjdE5vZGVMaXN0IiwgcGFyYW1zLm5vZGVzKTsKICAgIH07IC8v44Kz44Oz44OG44Kt44K544OI44Oh44OL44Ol44O844Gu44Kv44Oq44OD44KvCgoKICAgIGNvbnN0IG9wdGlvbkNsaWNrZWQgPSAoKSA9PiB7CiAgICAgIHZhciBjb3B5Tm9kZTsKICAgICAgdmFyIGNvcHlOb2Rlc0RhdGEgPSBzdG9yZS5zdGF0ZS5zZWxlY3Rub2RlTGlzdDsKCiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgY29weU5vZGVzRGF0YS5sZW5ndGg7IHMrKykgewogICAgICAgIHZhciBjb3B5Tm9kZURhdGEgPSBzdG9yZS5zdGF0ZS5zZWxlY3Rub2RlTGlzdFtzXTsKCiAgICAgICAgaWYgKGNvcHlOb2RlRGF0YS50eXBlID09ICdpbnB1dCcgfHwgY29weU5vZGVEYXRhLnR5cGUgPT0gJ291dHB1dCcpIHsKICAgICAgICAgIC8v6ZaL5aeL44OO44O844OJ44GL57WC5LqG44OO44O844OJCiAgICAgICAgICAvL+OCs+ODlOODvOOBleOBm+OBquOBhAogICAgICAgICAgY29weU5vZGUgPSB7CiAgICAgICAgICAgIGlkOiBzc19nZXRJZCgpLAogICAgICAgICAgICB0eXBlOiBjb3B5Tm9kZURhdGEudHlwZSwKICAgICAgICAgICAgcG9zaXRpb246IHByb2plY3QoewogICAgICAgICAgICAgIHg6IGNvcHlOb2RlRGF0YS5wb3NpdGlvbi54ICsgMTAwLAogICAgICAgICAgICAgIHk6IGNvcHlOb2RlRGF0YS5wb3NpdGlvbi55ICsgMTAwCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBsYWJlbDogY29weU5vZGVEYXRhLmxhYmVsCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSBpZiAoY29weU5vZGVEYXRhLnR5cGUgPT0gJ2N1c3RvbU1ha2UnKSB7CiAgICAgICAgICAvL+ODoeOCpOOCr+ODjuODvOODiQogICAgICAgICAgY29weU5vZGUgPSB7CiAgICAgICAgICAgIGlkOiBtX2dldElkKCksCiAgICAgICAgICAgIHR5cGU6IGNvcHlOb2RlRGF0YS50eXBlLAogICAgICAgICAgICBwb3NpdGlvbjogcHJvamVjdCh7CiAgICAgICAgICAgICAgeDogY29weU5vZGVEYXRhLnBvc2l0aW9uLnggKyAxMDAsCiAgICAgICAgICAgICAgeTogY29weU5vZGVEYXRhLnBvc2l0aW9uLnkgKyAxMDAKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGxhYmVsOiBjb3B5Tm9kZURhdGEubGFiZWwsCiAgICAgICAgICAgIHN0eWxlOiBjb3B5Tm9kZURhdGEuc3R5bGUsCiAgICAgICAgICAgIGRhdGE6IGNvcHlOb2RlRGF0YS5kYXRhCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvL+WIhuWykO+8iOODluODqeODs+ODge+8ieODjuODvOODiQogICAgICAgICAgY29weU5vZGUgPSB7CiAgICAgICAgICAgIGlkOiBjb3B5Tm9kZURhdGEudHlwZSA9PSAnY3VzdG9tTW90aXZhdGlvbicgPyBtdl9nZXRJZCgpIDogY29weU5vZGVEYXRhLnR5cGUgPT0gJ2N1c3RvbVNlYXNvbicgPyBzX2dldElkKCkgOiB0X2dldElkKCksCiAgICAgICAgICAgIHR5cGU6IGNvcHlOb2RlRGF0YS50eXBlLAogICAgICAgICAgICBwb3NpdGlvbjogcHJvamVjdCh7CiAgICAgICAgICAgICAgeDogY29weU5vZGVEYXRhLnBvc2l0aW9uLnggKyAxMDAsCiAgICAgICAgICAgICAgeTogY29weU5vZGVEYXRhLnBvc2l0aW9uLnkgKyAxMDAKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGxhYmVsOiBjb3B5Tm9kZURhdGEubGFiZWwsCiAgICAgICAgICAgIHN0eWxlOiBjb3B5Tm9kZURhdGEuc3R5bGUKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBhZGROb2RlcyhbY29weU5vZGVdKTsKICAgICAgfQogICAgfTsKICAgIC8qIOi1t+WLleaZguOBruaMmeWLlSAqLwogICAgLy9vblBhbmVSZWFkeeOBr+OAgXZpZXdwYW5l44Go44OO44O844OJ44Gr6KGo56S65Y+v6IO944Gq44OH44Kj44Oh44Oz44K344On44Oz44GM44GC44KL5aC05ZCI44Gr5ZG844Gz5Ye644GV44KM44G+44GZCgoKICAgIG9uUGFuZVJlYWR5KCh7CiAgICAgIGZpdFZpZXcKICAgIH0pID0+IHsKICAgICAgZml0VmlldygpOwogICAgfSk7CgogICAgY29uc3Qgb25Mb2FkID0gZmxvd0luc3RhbmNlID0+IGZsb3dJbnN0YW5jZS5maXRWaWV3KCk7CiAgICAvKiDlr77osaHjga7jg47jg7zjg4njgajjgqjjg4Pjgrjjga7oqr/mn7sgKi8KICAgIC8v5a++6LGh44Ko44OD44K444Go5ZCM44GY44OO44O844OJ44GL44KJ5Ye644Gm44GE44KL44Ko44OD44K444Gu5pys5pWw44KS6L+U44GZKHJldHVybikKCgogICAgY29uc3Qgc3VydmV5U2FtZVNvdXJjZSA9IHNvdXJjZSA9PiB7CiAgICAgIGlmIChTa2V5cy5pbmNsdWRlcyhzb3VyY2UpKSB7CiAgICAgICAgdmFyIHRlbXAyID0gZWRnZVNOdW1bc291cmNlXTsKICAgICAgICByZXR1cm4gdGVtcDIubGVuZ3RoOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9OyAvL+WvvuixoeOCqOODg+OCuOOBrui/veWKoC/liYrpmaTjgavkvLTjgYZTa2V5c+OBqGVkZ2VTTnVt44Gu5pu05pawCgoKICAgIGNvbnN0IGNoYW5nZUVkZ2VzID0gKGVkZ2UsIHR5cGUpID0+IHsKICAgICAgLy/jg4fjg7zjgr/lj5fjgZHlj5bjgooKICAgICAgdmFyIGVpZCA9IGVkZ2UuaWQ7CiAgICAgIHZhciBzb3VyY2UgPSBlZGdlLnNvdXJjZTsgLy9Ta2V5c+OBruabtOaWsAoKICAgICAgU2tleXMgPSBPYmplY3Qua2V5cyhlZGdlU051bSk7CgogICAgICBpZiAodHlwZSA9PSAiYWRkIikgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJlZGdlU051beOBruabtOaWsCjov73liqApIikKICAgICAgICBpZiAoU2tleXMuaW5jbHVkZXMoc291cmNlKSkgewogICAgICAgICAgZWRnZVNOdW1bc291cmNlXS5wdXNoKGVpZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVkZ2VTTnVtW3NvdXJjZV0gPSBbXTsKICAgICAgICAgIGVkZ2VTTnVtW3NvdXJjZV0ucHVzaChlaWQpOwogICAgICAgICAgU2tleXMgPSBPYmplY3Qua2V5cyhlZGdlU051bSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInJlbW92ZSIpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiZWRnZVNOdW3jga7mm7TmlrAo5YmK6ZmkKSIpCiAgICAgICAgdmFyIHNhbWVFZGdlU051bSA9IGVkZ2VTTnVtW3NvdXJjZV07CgogICAgICAgIGlmIChzYW1lRWRnZVNOdW0ubGVuZ3RoID49IDIpIHsKICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2FtZUVkZ2VTTnVtLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmIChzYW1lRWRnZVNOdW1bal0gPT0gZWlkKSB7CiAgICAgICAgICAgICAgZWRnZVNOdW1bc291cmNlXS5zcGxpY2UoaiwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIGVkZ2VTTnVtW3NvdXJjZV07CiAgICAgICAgICBTa2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VTTnVtKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAiY2hhbmdlIikgey8vIGNvbnNvbGUubG9nKCJlZGdlU051beOBruabtOaWsCjlpInmm7QpIikKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH07IC8v5a++6LGh44Oh44Kk44Kv44OO44O844OJ44Gu6L+95YqgL+WJiumZpOaZguOBrm1ha2VOb2RlTnVt44Gu5YCk44Go6KGo56S644Kk44Op44K544OI44Gu5pu05pawCgoKICAgIGNvbnN0IGNoYW5nZU1ha2VOb2RlcyA9IG5vZGVEYXRhID0+IHsKICAgICAgaWYgKG5vZGVEYXRhLnR5cGUgPT0gImFkZCIpIHsKICAgICAgICBtYWtlTm9kZU51bVtub2RlRGF0YS5pbWdOdW1dLnB1c2gobm9kZURhdGEuaWQpOwogICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLnR5cGUgPT0gInJlbW92ZSIpIHsKICAgICAgICB2YXIgbGVuZ3RoTnVtID0gbWFrZU5vZGVOdW1bbm9kZURhdGEuaW1nTnVtXTsKCiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBsZW5ndGhOdW0ubGVuZ3RoOyBuKyspIHsKICAgICAgICAgIGlmIChsZW5ndGhOdW1bbl0gPT0gbm9kZURhdGEuaWQpIHsKICAgICAgICAgICAgbWFrZU5vZGVOdW1bbm9kZURhdGEuaW1nTnVtXS5zcGxpY2UobiwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfSAvL+ODoeOCpOOCr+ODjuODvOODieOBrui/veWKoC/liYrpmaTjgavkvLTjgYbooajnpLrjgqTjg6njgrnjg4jjga7mm7TmlrAKCgogICAgICBmb3IgKHZhciBsID0gMDsgbCA8IE9iamVjdC5rZXlzKG1ha2VOb2RlTnVtKS5sZW5ndGg7IGwrKykgewogICAgICAgIHZhciB0ZW1wTGVuZ3RoTnVtID0gbWFrZU5vZGVOdW1bbF07CgogICAgICAgIGlmICh0ZW1wTGVuZ3RoTnVtLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICBzdG9yZS5jb21taXQoInNldE1ha2VOb2RlTGlzdCIsIHsKICAgICAgICAgICAgaW1nTnVtOiBsLAogICAgICAgICAgICBpbWdTdGF0ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgic2V0TWFrZU5vZGVMaXN0IiwgewogICAgICAgICAgICBpbWdOdW06IGwsCiAgICAgICAgICAgIGltZ1N0YXRlOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OyAvL3R1cm4y44Gr56e744KL5YmN44Gr44Oh44Kk44Kv6ZaL5aeL44O757WC5LqG44OO44O844OJ44GM6Kit572u44GV44KM44Gm44GE44KL44GL56K66KqN44GZ44KLCgoKICAgIGNvbnN0IGNoZWNrT3V0cHV0ID0gKCkgPT4gewogICAgICB2YXIgaW5wdXROb2RlID0gZmFsc2U7CiAgICAgIHZhciBvdXRwdXROb2RlID0gZmFsc2U7CiAgICAgIGVsZW1lbnRzLnZhbHVlLmZvckVhY2goZWwgPT4gewogICAgICAgIGlmIChpc05vZGUoZWwpKSB7CiAgICAgICAgICBpZiAoZWwudHlwZSA9PSAiaW5wdXQiKSB7CiAgICAgICAgICAgIGlucHV0Tm9kZSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYgKGVsLnR5cGUgPT0gIm91dHB1dCIpIHsKICAgICAgICAgICAgb3V0cHV0Tm9kZSA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgc3RvcmUuY29tbWl0KCJzZXRJbk91dHB1dCIsIHsKICAgICAgICBpbnB1dDogaW5wdXROb2RlLAogICAgICAgIG91dHB1dDogb3V0cHV0Tm9kZQogICAgICB9KTsKCiAgICAgIGlmICghc3RvcmUuc3RhdGUuaW5wdXROIHx8ICFzdG9yZS5zdGF0ZS5vdXRwdXROKSB7CiAgICAgICAgYWxlcnQoIuODoeOCpOOCr+mWi+Wni+ODu+e1guS6huODjuODvOODieOCkuioree9ruOBl+OBpuOBj+OBoOOBleOBhO+8jiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfTsKICAgIC8qIOODjuODvOODieOBruWkieabtOaZguOBq+eZuueBq+OBmeOCi+mWouaVsCAqLwoKCiAgICBvbk5vZGVzQ2hhbmdlKHBhcmFtcyA9PiB7CiAgICAgIC8vdHlwZTogZGltZW5zaW9ucyjphY3nva7vvJ8v44K144Kk44K65oOF5aCxKSwgc2VsZWN0LCBhZGQsIHJlbW92ZQogICAgICAvL3BhcmFtcyBhZGQ6W3R5cGUsIGl0ZW17fV0gcmVtb3ZlOlt0eXBlLCBpZF0gc2VsZWN0Olt0eXBlLCBpZCwgc2VsZWN0ZWRdCiAgICAgIGZvciAodmFyIHEgPSAwOyBxIDwgcGFyYW1zLmxlbmd0aDsgcSsrKSB7CiAgICAgICAgaWYgKHBhcmFtc1txXS50eXBlID09ICJhZGQiKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygi44OO44O844OJ44Gu6L+95YqgIikKICAgICAgICAgIC8v44Oh44Kk44Kv44OO44O844OJ44Gg44Gj44Gf44KJCiAgICAgICAgICBpZiAocGFyYW1zW3FdLml0ZW0udHlwZSA9PSAiY3VzdG9tTWFrZSIpIHsKICAgICAgICAgICAgdmFyIG5vZGVpdGVtcyA9IHBhcmFtc1txXS5pdGVtOwogICAgICAgICAgICB2YXIgbm9kZURhdGEgPSBub2RlaXRlbXMuZGF0YTsgLy/ljJbnsqflt6XnqIvjga7liKTlrpoKCiAgICAgICAgICAgIGlmIChub2RlRGF0YS5wYXJ0TnVtID09IDEgJiYgbm9kZURhdGEuaXRlbU51bSA9PSA4KSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMCwKICAgICAgICAgICAgICAgIGlkOiBub2RlaXRlbXMuaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAiYWRkIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLnBhcnROdW0gPT0gMSAmJiBub2RlRGF0YS5pdGVtTnVtID09IDggJiYgbm9kZURhdGEudHlwZU51bSA9PSAyKSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMSwKICAgICAgICAgICAgICAgIGlkOiBub2RlaXRlbXMuaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAiYWRkIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLnBhcnROdW0gPT0gMiAmJiBub2RlRGF0YS5pdGVtTnVtID09IDExKSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMiwKICAgICAgICAgICAgICAgIGlkOiBub2RlaXRlbXMuaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAiYWRkIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVEYXRhLnBhcnROdW0gPT0gMiAmJiAxMyA8PSBub2RlRGF0YS5pdGVtTnVtICYmIG5vZGVEYXRhLml0ZW1OdW0gPD0gMTYpIHsKICAgICAgICAgICAgICBjaGFuZ2VNYWtlTm9kZXMoewogICAgICAgICAgICAgICAgaW1nTnVtOiAzLAogICAgICAgICAgICAgICAgaWQ6IG5vZGVpdGVtcy5pZCwKICAgICAgICAgICAgICAgIHR5cGU6ICJhZGQiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZURhdGEucGFydE51bSA9PSAyICYmIDE3IDw9IG5vZGVEYXRhLml0ZW1OdW0gJiYgbm9kZURhdGEuaXRlbU51bSA8PSAyMCkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDQsCiAgICAgICAgICAgICAgICBpZDogbm9kZWl0ZW1zLmlkLAogICAgICAgICAgICAgICAgdHlwZTogImFkZCIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5wYXJ0TnVtID09IDQgJiYgbm9kZURhdGEuaXRlbU51bSA9PSAyNCkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDUsCiAgICAgICAgICAgICAgICBpZDogbm9kZWl0ZW1zLmlkLAogICAgICAgICAgICAgICAgdHlwZTogImFkZCIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5wYXJ0TnVtID09IDQgJiYgbm9kZURhdGEuaXRlbU51bSA9PSAyNSkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDYsCiAgICAgICAgICAgICAgICBpZDogbm9kZWl0ZW1zLmlkLAogICAgICAgICAgICAgICAgdHlwZTogImFkZCIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlRGF0YS5wYXJ0TnVtID09IDAgJiYgbm9kZURhdGEuaXRlbU51bSA9PSAyMikgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDcsCiAgICAgICAgICAgICAgICBpZDogbm9kZWl0ZW1zLmlkLAogICAgICAgICAgICAgICAgdHlwZTogImFkZCIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHBhcmFtc1txXS50eXBlID09ICJyZW1vdmUiKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygi44OO44O844OJ44Gu5YmK6ZmkIikKICAgICAgICAgIGlmIChwYXJhbXNbcV0uaWQuaW5kZXhPZignbWFrZScpID4gLTEpIHsKICAgICAgICAgICAgLy/jg6HjgqTjgq/jg47jg7zjg4njgaDjgaPjgZ/jgokKICAgICAgICAgICAgY29uc3Qgcm5vZGUgPSBnZXROb2RlLnZhbHVlKHBhcmFtc1txXS5pZCk7CiAgICAgICAgICAgIGNvbnN0IHJkYXRhID0gcm5vZGUuZGF0YTsKCiAgICAgICAgICAgIGlmIChyZGF0YS5wYXJ0TnVtID09IDEgJiYgcmRhdGEuaXRlbU51bSA9PSA4KSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMCwKICAgICAgICAgICAgICAgIGlkOiBwYXJhbXNbcV0uaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAicmVtb3ZlIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJkYXRhLnBhcnROdW0gPT0gMSAmJiByZGF0YS5pdGVtTnVtID09IDggJiYgcmRhdGEudHlwZU51bSA9PSAyKSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMSwKICAgICAgICAgICAgICAgIGlkOiBwYXJhbXNbcV0uaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAicmVtb3ZlIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJkYXRhLnBhcnROdW0gPT0gMiAmJiByZGF0YS5pdGVtTnVtID09IDExKSB7CiAgICAgICAgICAgICAgY2hhbmdlTWFrZU5vZGVzKHsKICAgICAgICAgICAgICAgIGltZ051bTogMiwKICAgICAgICAgICAgICAgIGlkOiBwYXJhbXNbcV0uaWQsCiAgICAgICAgICAgICAgICB0eXBlOiAicmVtb3ZlIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJkYXRhLnBhcnROdW0gPT0gMiAmJiAxMyA8PSByZGF0YS5pdGVtTnVtICYmIHJkYXRhLml0ZW1OdW0gPD0gMTYpIHsKICAgICAgICAgICAgICBjaGFuZ2VNYWtlTm9kZXMoewogICAgICAgICAgICAgICAgaW1nTnVtOiAzLAogICAgICAgICAgICAgICAgaWQ6IHBhcmFtc1txXS5pZCwKICAgICAgICAgICAgICAgIHR5cGU6ICJyZW1vdmUiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocmRhdGEucGFydE51bSA9PSAyICYmIDE3IDw9IHJkYXRhLml0ZW1OdW0gJiYgcmRhdGEuaXRlbU51bSA8PSAyMCkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDQsCiAgICAgICAgICAgICAgICBpZDogcGFyYW1zW3FdLmlkLAogICAgICAgICAgICAgICAgdHlwZTogInJlbW92ZSIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZGF0YS5wYXJ0TnVtID09IDQgJiYgcmRhdGEuaXRlbU51bSA9PSAyNCkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDUsCiAgICAgICAgICAgICAgICBpZDogcGFyYW1zW3FdLmlkLAogICAgICAgICAgICAgICAgdHlwZTogInJlbW92ZSIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZGF0YS5wYXJ0TnVtID09IDQgJiYgcmRhdGEuaXRlbU51bSA9PSAyNSkgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDYsCiAgICAgICAgICAgICAgICBpZDogcGFyYW1zW3FdLmlkLAogICAgICAgICAgICAgICAgdHlwZTogInJlbW92ZSIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChyZGF0YS5wYXJ0TnVtID09IDAgJiYgcmRhdGEuaXRlbU51bSA9PSAyMikgewogICAgICAgICAgICAgIGNoYW5nZU1ha2VOb2Rlcyh7CiAgICAgICAgICAgICAgICBpbWdOdW06IDcsCiAgICAgICAgICAgICAgICBpZDogcGFyYW1zW3FdLmlkLAogICAgICAgICAgICAgICAgdHlwZTogInJlbW92ZSIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHBhcmFtc1txXS50eXBlID09ICJzZWxlY3QiKSB7CiAgICAgICAgICB2YXIgc25vZGU7CgogICAgICAgICAgaWYgKHBhcmFtc1txXS5pZC5pbmRleE9mKCdtYWtlJykgPiAtMSB8fCBwYXJhbXNbcV0uaWQuaW5kZXhPZignYnJhbmNoJykgPiAtMSkgewogICAgICAgICAgICAvL+ODoeOCpOOCr+ODjuODvOODieOBi+ODluODqeODs+ODgeODjuODvOODieOBoOOBo+OBn+OCiQogICAgICAgICAgICBzbm9kZSA9IGdldE5vZGUudmFsdWUocGFyYW1zW3FdLmlkKTsKCiAgICAgICAgICAgIGlmIChwYXJhbXNbcV0uc2VsZWN0ZWQpIHsKICAgICAgICAgICAgICBzbm9kZS5zdHlsZVsiLS12Zi1ub2RlLWNvbG9yIl0gPSAnIzNjYjM3MSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc25vZGUuc3R5bGVbIi0tdmYtbm9kZS1jb2xvciJdID0gJ2JsYWNrJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS50dXJuID09IDIpIHsKICAgICAgICAgICAgaWYgKHBhcmFtc1txXS5pZC5pbmRleE9mKCdtYWtlJykgPiAtMSkgewogICAgICAgICAgICAgIC8v44Oh44Kk44Kv44OO44O844OJ44Gg44Gj44Gf44KJCiAgICAgICAgICAgICAgaWYgKHBhcmFtc1txXS5zZWxlY3RlZCkgewogICAgICAgICAgICAgICAgaWYgKCFzbm9kZS5kYXRhWyJza2lwIl0pIHsKICAgICAgICAgICAgICAgICAgLy9za2lw44GMZmFsc2XjgaDjgaPjgZ/jgokKICAgICAgICAgICAgICAgICAgc25vZGUuc3R5bGVbIi0tdmYtbm9kZS10ZXh0Il0gPSAnI2ZmOGMwMCc7CiAgICAgICAgICAgICAgICAgIHNub2RlLmRhdGFbInNraXAiXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvL3NraXDjgYx0cnVl44Gg44Gj44Gf44KJCiAgICAgICAgICAgICAgICAgIHNub2RlLnN0eWxlWyItLXZmLW5vZGUtdGV4dCJdID0gJ2JsYWNrJzsKICAgICAgICAgICAgICAgICAgc25vZGUuZGF0YVsic2tpcCJdID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKHN0b3JlLnN0YXRlLnR1cm4gPT0gMykgewogICAgICAgICAgICBpZiAocGFyYW1zW3FdLmlkLmluZGV4T2YoJ21ha2UnKSA+IC0xKSB7CiAgICAgICAgICAgICAgLy/jg6HjgqTjgq/jg47jg7zjg4njgaDjgaPjgZ/jgokKICAgICAgICAgICAgICBpZiAocGFyYW1zW3FdLnNlbGVjdGVkKSB7CiAgICAgICAgICAgICAgICBpZiAoIXNub2RlLmRhdGFbImZvcmdldCJdKSB7CiAgICAgICAgICAgICAgICAgIC8vZm9yZ2V044GMZmFsc2XjgaDjgaPjgZ/jgokKICAgICAgICAgICAgICAgICAgc25vZGUuc3R5bGVbIi0tdmYtbm9kZS1iZyJdID0gInBpbmsiOwogICAgICAgICAgICAgICAgICBzbm9kZS5kYXRhWyJmb3JnZXQiXSA9IHRydWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvL2ZvcmdldOOBjHRydWXjgaDjgaPjgZ/jgokKICAgICAgICAgICAgICAgICAgc25vZGUuc3R5bGVbIi0tdmYtbm9kZS1iZyJdID0gIndoaXRlIjsKICAgICAgICAgICAgICAgICAgc25vZGUuZGF0YVsiZm9yZ2V0Il0gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICAvKiDjgqjjg4Pjgrjjga7lpInmm7TmmYLjgavnmbrngavjgZnjgovplqLmlbAgKi8KCiAgICBvbkVkZ2VzQ2hhbmdlKHBhcmFtcyA9PiB7CiAgICAgIHZhciBOdW1PZlNhbWVTb3VyY2VzOyAvL3BhcmFtcyBhZGQ6W3R5cGUsIGl0ZW17fV0gIHJlbW92ZTpbdHlwZSwgaWRdICBzZWxlY3Q6W3R5cGUsIGlkLCBzZWxlY3RlZF0KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHBhcmFtc1tpXS50eXBlID09ICJhZGQiKSB7CiAgICAgICAgICB2YXIgZWRnZUl0ZW0gPSBwYXJhbXNbaV0uaXRlbTsgLy9lZGdlU051beOBq+aWsOOBl+OBhOOCqOODg+OCuOOCkui/veWKoOOBmeOCiwoKICAgICAgICAgIFNrZXlzID0gT2JqZWN0LmtleXMoZWRnZVNOdW0pOyAvL+acgOaWsOeJiOOBq+abtOaWsAoKICAgICAgICAgIGlmIChTa2V5cy5pbmNsdWRlcyhlZGdlSXRlbS5zb3VyY2UpKSB7CiAgICAgICAgICAgIGVkZ2VTTnVtW2VkZ2VJdGVtLnNvdXJjZV0ucHVzaChlZGdlSXRlbS5pZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlZGdlU051bVtlZGdlSXRlbS5zb3VyY2VdID0gW107CiAgICAgICAgICAgIGVkZ2VTTnVtW2VkZ2VJdGVtLnNvdXJjZV0ucHVzaChlZGdlSXRlbS5pZCk7CiAgICAgICAgICAgIFNrZXlzID0gT2JqZWN0LmtleXMoZWRnZVNOdW0pOwogICAgICAgICAgfSAvL+i/veWKoOOBmeOCi+OCqOODg+OCuOOBqOWQjOOBmHNvdXJjZeOBruOCqOODg+OCuOOBjOS9leacrOOBguOCi+OBi+iqv+OBueOCiwoKCiAgICAgICAgICBOdW1PZlNhbWVTb3VyY2VzID0gc3VydmV5U2FtZVNvdXJjZShlZGdlSXRlbS5zb3VyY2UpOyAvL+OCqOODg+OCuOOBjOePvueKtuOBpzHmnKzku6XkuIrjgYLjgaPjgZ/jgonjgqjjg4PjgrjjgpJzbW9vdGhzdGVw44Gr5YiH44KK5pu/44GI44KLCgogICAgICAgICAgaWYgKE51bU9mU2FtZVNvdXJjZXMgPj0gMSkgewogICAgICAgICAgICBlbGVtZW50cy52YWx1ZS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgICBpZiAoaXNFZGdlKGVsKSAmJiBlbC5zb3VyY2UgPT0gZWRnZUl0ZW0uc291cmNlKSB7CiAgICAgICAgICAgICAgICBlbC50eXBlID0gJ3Ntb290aHN0ZXAnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXNbaV0udHlwZSA9PSAicmVtb3ZlIikgewogICAgICAgICAgdmFyIHNvdXJjZTsKICAgICAgICAgIHZhciBlZGdlRGF0YTsgLy/mtojjgZnjgqjjg4PjgrjjgajlkIzjgZhzb3VyY2Xjga7jgqjjg4PjgrjjgYzkvZXmnKzjgYLjgovjgYvoqr/jgbnjgosKCiAgICAgICAgICBlbGVtZW50cy52YWx1ZS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgaWYgKGVsLmlkID09IHBhcmFtc1tpXS5pZCkgewogICAgICAgICAgICAgIGVkZ2VEYXRhID0gZWw7CiAgICAgICAgICAgICAgc291cmNlID0gZWwuc291cmNlOwogICAgICAgICAgICAgIE51bU9mU2FtZVNvdXJjZXMgPSBzdXJ2ZXlTYW1lU291cmNlKHNvdXJjZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOyAvL+OCqOODg+OCuOOBjOePvueKtuOBpzLmnKzku6XkuIvjgaDjgaPjgZ/jgonjgqjjg4PjgrjjgpJzdHJhaWdodOOBq+WIh+OCiuabv+OBiOOCiwoKICAgICAgICAgIGlmIChOdW1PZlNhbWVTb3VyY2VzID09IDIpIHsKICAgICAgICAgICAgZWxlbWVudHMudmFsdWUuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgaWYgKGlzRWRnZShlbCkgJiYgZWwuc291cmNlID09IHNvdXJjZSkgewogICAgICAgICAgICAgICAgZWwudHlwZSA9ICdzdHJhaWdodCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gLy9lZGdlTGlzdOOBrueKtuaFi+WkieabtAoKCiAgICAgICAgICBjaGFuZ2VFZGdlcyhlZGdlRGF0YSwgInJlbW92ZSIpOwogICAgICAgIH0gZWxzZSBpZiAocGFyYW1zW2ldLnR5cGUgPT0gInNlbGVjdCIpIHsKICAgICAgICAgIHZhciBzZWRnZSA9IGdldEVkZ2UudmFsdWUocGFyYW1zW2ldLmlkKTsKCiAgICAgICAgICBpZiAocGFyYW1zW2ldLnNlbGVjdGVkKSB7CiAgICAgICAgICAgIHNlZGdlLmFuaW1hdGVkID0gdHJ1ZTsgLy90dXJuMuOBoOOBo+OBn+OCieODqeODmeODq+ioreWumueUqOOBq2lk44KS5L+d5a2Y44GZ44KLCgogICAgICAgICAgICBpZiAoc3RvcmUuc3RhdGUudHVybiA9PSAyKSB7CiAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRFZGdlSWQiLCBwYXJhbXNbaV0uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWRnZS5hbmltYXRlZCA9IGZhbHNlOyAvL3R1cm4y44Gg44Gj44Gf44KJ44Op44OZ44Or6Kit5a6a55So44GraWTjgpLkv53lrZjjgZnjgosKCiAgICAgICAgICAgIGlmIChzdG9yZS5zdGF0ZS50dXJuID09IDIpIHsKICAgICAgICAgICAgICBzdG9yZS5jb21taXQoInNldEVkZ2VJZCIsICIiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIC8qIOOCqOODg+OCuOOBrui/veWKoOaZguOBq+eZuueBq+OBmeOCi+mWouaVsCBvbkNvbm5lY3QtPm9uRWRnZXNDaGFuZ2UgKi8KCiAgICBvbkNvbm5lY3QocGFyYW1zID0+IHsKICAgICAgLy8gY29uc29sZS5sb2coIuOCqOODg+OCuOOBrui/veWKoCIpCiAgICAgIC8vcGFyYW1zOltzb3VyY2UsIHNvdXJjZUhhbmRsZSwgdGFyZ2V0LCB0YXJnZXRIYW5kbGVdCiAgICAgIC8v5ZCM44GY44K944O844K544Gu44Ko44OD44K444Gu5pys5pWw44KS5Y+W5b6X44GZ44KLCiAgICAgIHZhciBOdW1PZkVkZ2U7CiAgICAgIFNrZXlzID0gT2JqZWN0LmtleXMoZWRnZVNOdW0pOwoKICAgICAgaWYgKFNrZXlzLmluY2x1ZGVzKHBhcmFtcy5zb3VyY2UpKSB7CiAgICAgICAgTnVtT2ZFZGdlID0gc3VydmV5U2FtZVNvdXJjZShwYXJhbXMuc291cmNlKSArIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgTnVtT2ZFZGdlID0gMTsKICAgICAgfSAvL+aWsOOBl+OBhOOCqOODg+OCuOOBrui/veWKoAoKCiAgICAgIHZhciBuZXdFZGdlOwoKICAgICAgY29uc3QgZ2V0RWRnZUlkID0gKCkgPT4gYGUke3BhcmFtcy5zb3VyY2V9XyR7cGFyYW1zLnRhcmdldH1gOwoKICAgICAgaWYgKE51bU9mRWRnZSA8IDMpIHsKICAgICAgICBpZiAocGFyYW1zLnNvdXJjZS5pbmRleE9mKCdtYWtlJykgPiAtMSkgewogICAgICAgICAgLy9jdXN0b21NYWtl44Gg44Gj44Gf44KJCiAgICAgICAgICBpZiAoTnVtT2ZFZGdlIDwgMikgewogICAgICAgICAgICBuZXdFZGdlID0gewogICAgICAgICAgICAgIGlkOiBnZXRFZGdlSWQoKSwKICAgICAgICAgICAgICBzb3VyY2U6IHBhcmFtcy5zb3VyY2UsCiAgICAgICAgICAgICAgdGFyZ2V0OiBwYXJhbXMudGFyZ2V0LAogICAgICAgICAgICAgIHR5cGU6ICdzdHJhaWdodCcsCiAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgIHN0cm9rZTogJ2JsYWNrJwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbWFya2VyRW5kOiBNYXJrZXJUeXBlLkFycm93Q2xvc2VkLAogICAgICAgICAgICAgIGFuaW1hdGVkOiBmYWxzZQogICAgICAgICAgICB9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy/jg6HjgqTjgq/jg47jg7zjg4njgafjga/jgqjjg4PjgrjjgpIx5pys44GX44GL55Sf44KE44Gb44Gq44GECiAgICAgICAgICAgIGFsZXJ0KCIx44Gk44Gu5YyW57Kn44OO44O844OJ44GL44KJ5Ye644Gb44KL55+i5Y2w44GvMeacrOOBoOOBkeOBp+OBmS7ov73liqDjgafliIblspDjgZXjgZvjgZ/jgYTloLTlkIjjga/liIblspDjg47jg7zjg4njgpLnuYvjgZLjgabjgY/jgaDjgZXjgYQiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnNvdXJjZS5pbmRleE9mKCdicmFuY2gnKSA+IC0xKSB7CiAgICAgICAgICAvL2N1c3RvbUJyYW5jaOOBoOOBo+OBn+OCiQogICAgICAgICAgdmFyIGFkZEVkZ2VMYWJlbDsKICAgICAgICAgIHZhciBhZGRFZGdlQ29sb3I7CiAgICAgICAgICB2YXIgYWRkRWRnZVR5cGU7CgogICAgICAgICAgaWYgKHBhcmFtcy5zb3VyY2UuaW5kZXhPZignbXZicmFuY2gnKSA+IC0xKSB7CiAgICAgICAgICAgIC8v44KE44KL5rCX44OO44O844OJCiAgICAgICAgICAgIGFkZEVkZ2VMYWJlbCA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICfjgarjgZcnIDogJ+OBguOCiic7CiAgICAgICAgICAgIGFkZEVkZ2VDb2xvciA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICdibHVlJyA6ICdyZWQnOwogICAgICAgICAgICBhZGRFZGdlVHlwZSA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICdubycgOiAnbWF4JzsKICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW1zLnNvdXJjZS5pbmRleE9mKCdzYnJhbmNoJykgPiAtMSkgewogICAgICAgICAgICAvL+Wto+evgOODjuODvOODiQogICAgICAgICAgICBhZGRFZGdlTGFiZWwgPSBOdW1PZkVkZ2UgJSAyID09IDAgPyAn5YasJyA6ICflpI8nOwogICAgICAgICAgICBhZGRFZGdlQ29sb3IgPSBOdW1PZkVkZ2UgJSAyID09IDAgPyAnZ3JheScgOiAnYmx1ZSc7CiAgICAgICAgICAgIGFkZEVkZ2VUeXBlID0gTnVtT2ZFZGdlICUgMiA9PSAwID8gJ3dpbnRlcicgOiAnc3VtbWVyJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8v5pmC6ZaT44OO44O844OJCiAgICAgICAgICAgIGFkZEVkZ2VMYWJlbCA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICfnn63jgYQnIDogJ+mVt+OBhCc7CiAgICAgICAgICAgIGFkZEVkZ2VDb2xvciA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICdibHVlJyA6ICdyZWQnOwogICAgICAgICAgICBhZGRFZGdlVHlwZSA9IE51bU9mRWRnZSAlIDIgPT0gMCA/ICdzaG9ydCcgOiAnbG9uZyc7CiAgICAgICAgICB9CgogICAgICAgICAgbmV3RWRnZSA9IHsKICAgICAgICAgICAgaWQ6IGdldEVkZ2VJZCgpLAogICAgICAgICAgICBzb3VyY2U6IHBhcmFtcy5zb3VyY2UsCiAgICAgICAgICAgIHRhcmdldDogcGFyYW1zLnRhcmdldCwKICAgICAgICAgICAgdHlwZTogTnVtT2ZFZGdlID4gMSA/ICdzbW9vdGhzdGVwJyA6ICdzdHJhaWdodCcsCiAgICAgICAgICAgIGxhYmVsOiBhZGRFZGdlTGFiZWwsCiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgc3Ryb2tlOiBhZGRFZGdlQ29sb3IKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGFiZWxTdHlsZTogewogICAgICAgICAgICAgIGZpbGw6ICd3aGl0ZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGFiZWxCZ1N0eWxlOiB7CiAgICAgICAgICAgICAgZmlsbDogYWRkRWRnZUNvbG9yCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1hcmtlckVuZDogTWFya2VyVHlwZS5BcnJvd0Nsb3NlZCwKICAgICAgICAgICAgYW5pbWF0ZWQ6IGZhbHNlLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgdHlwZTogYWRkRWRnZVR5cGUKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy9pbnB1dC9vdXRwdXTjgaDjgaPjgZ/jgokKICAgICAgICAgIGlmIChOdW1PZkVkZ2UgPCAyKSB7CiAgICAgICAgICAgIG5ld0VkZ2UgPSB7CiAgICAgICAgICAgICAgaWQ6IGdldEVkZ2VJZCgpLAogICAgICAgICAgICAgIHNvdXJjZTogcGFyYW1zLnNvdXJjZSwKICAgICAgICAgICAgICB0YXJnZXQ6IHBhcmFtcy50YXJnZXQsCiAgICAgICAgICAgICAgdHlwZTogJ3N0cmFpZ2h0JywKICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgc3Ryb2tlOiAnYmxhY2snCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBtYXJrZXJFbmQ6IE1hcmtlclR5cGUuQXJyb3dDbG9zZWQsCiAgICAgICAgICAgICAgYW5pbWF0ZWQ6IGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL+ODoeOCpOOCr+ODjuODvOODieOBp+OBr+OCqOODg+OCuOOCkjHmnKzjgZfjgYvnlJ/jgoTjgZvjgarjgYQKICAgICAgICAgICAgYWxlcnQoIjHjgaTjga7jg6HjgqTjgq/plovlp4sv57WC5LqG44OO44O844OJ44GL44KJ5Ye644Gb44KL55+i5Y2w44GvMeacrOOBoOOBkeOBp+OBmS7ov73liqDjgafliIblspDjgZXjgZvjgZ/jgYTloLTlkIjjga/liIblspDjg47jg7zjg4njgpLnuYvjgZLjgabjgY/jgaDjgZXjgYQiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL+aWsOOBl+OBj+i2s+OBmeOCqOODg+OCuOOBjDPmnKznm67jgaDjgaPjgZ/jgonov73liqDjgZXjgZvjgarjgYQKICAgICAgICBhbGVydCgiMeOBpOOBruODjuODvOODieOBi+OCieWHuuOBm+OCi+efouWNsOOBrzLmnKzjgb7jgafjgafjgZku6L+95Yqg44Gn5YiG5bKQ44GV44Gb44Gf44GE5aC05ZCI44Gv5YiG5bKQ44OO44O844OJ44KS57mL44GS44Gm44GP44Gg44GV44GEIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhZGRFZGdlcyhbbmV3RWRnZV0pOwogICAgfSk7CiAgICAvKiDjg57jgqbjgrnmk43kvZzjgavntZDjgbPjgaTjgZHjgZ/plqLmlbAgKi8KICAgIC8v44OO44O844OJ44Gu44OJ44Op44OD44Kw5pON5L2cCgogICAgY29uc3Qgb25EcmFnT3ZlciA9IGV2ZW50ID0+IHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHsKICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsKICAgICAgfQogICAgfTsgLy/jg47jg7zjg4njga7jg4njg63jg4Pjg5fjgavjgojjgovvvIzmlrDopo/jg47jg7zjg4njga7ov73liqAKCgogICAgbGV0IGlkID0gMDsKCiAgICBjb25zdCBzc19nZXRJZCA9ICgpID0+IGBzc18ke2lkKyt9YDsKCiAgICBjb25zdCBtX2dldElkID0gKCkgPT4gYG1ha2VfJHtpZCsrfWA7CgogICAgY29uc3QgbXZfZ2V0SWQgPSAoKSA9PiBgbXZicmFuY2hfJHtpZCsrfWA7CgogICAgY29uc3Qgc19nZXRJZCA9ICgpID0+IGBzYnJhbmNoXyR7aWQrK31gOwoKICAgIGNvbnN0IHRfZ2V0SWQgPSAoKSA9PiBgdGJyYW5jaF8ke2lkKyt9YDsKCiAgICBjb25zdCBvbkRyb3AgPSBldmVudCA9PiB7CiAgICAgIHZhciBfZXZlbnQkZGF0YVRyYW5zZmVyOwoKICAgICAgY29uc3QgdHlwZSA9IChfZXZlbnQkZGF0YVRyYW5zZmVyID0gZXZlbnQuZGF0YVRyYW5zZmVyKSA9PT0gbnVsbCB8fCBfZXZlbnQkZGF0YVRyYW5zZmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXZlbnQkZGF0YVRyYW5zZmVyLmdldERhdGEoJ2FwcGxpY2F0aW9uL3Z1ZWZsb3cnKTsKICAgICAgY29uc3QgcG9zaXRpb24gPSBwcm9qZWN0KHsKICAgICAgICB4OiBldmVudC5jbGllbnRYIC0gNDAwLAogICAgICAgIHk6IGV2ZW50LmNsaWVudFkgLSAxNTAKICAgICAgfSk7CiAgICAgIHZhciBuZXdOb2RlOwoKICAgICAgaWYgKHR5cGUgPT0gJ2lucHV0JyB8fCB0eXBlID09ICdvdXRwdXQnKSB7CiAgICAgICAgLy/plovlp4vjg47jg7zjg4njgYvntYLkuobjg47jg7zjg4kKICAgICAgICBuZXdOb2RlID0gewogICAgICAgICAgaWQ6IHNzX2dldElkKCksCiAgICAgICAgICB0eXBlLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICBsYWJlbDogdHlwZSA9PSAnaW5wdXQnID8gJ+ODoeOCpOOCr+mWi+WniycgOiAn44Oh44Kk44Kv57WC5LqGJwogICAgICAgIH07CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnY3VzdG9tTWFrZScpIHsKICAgICAgICAvL+ODoeOCpOOCr+ODjuODvOODiQogICAgICAgIG5ld05vZGUgPSB7CiAgICAgICAgICBpZDogbV9nZXRJZCgpLAogICAgICAgICAgdHlwZSwKICAgICAgICAgIHBvc2l0aW9uLAogICAgICAgICAgbGFiZWw6IHN0b3JlLnN0YXRlLml0ZW1OYW1lLmxlbmd0aCA+PSA3ID8gc3RvcmUuc3RhdGUuaXRlbU5hbWUgKyAnXG4oJyArIHN0b3JlLnN0YXRlLnR5cGVOYW1lICsgJyknIDogc3RvcmUuc3RhdGUuaXRlbU5hbWUgKyAnKCcgKyBzdG9yZS5zdGF0ZS50eXBlTmFtZSArICcpJywKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICItLXZmLW5vZGUtY29sb3IiOiAnYmxhY2snCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICBwYXJ0TmFtZTogc3RvcmUuc3RhdGUucGFydE5hbWUsCiAgICAgICAgICAgIHBhcnROdW06IHN0b3JlLnN0YXRlLnBhcnROdW0sCiAgICAgICAgICAgIGl0ZW1OYW1lOiBzdG9yZS5zdGF0ZS5pdGVtTmFtZSwKICAgICAgICAgICAgaXRlbU51bTogc3RvcmUuc3RhdGUuaXRlbU51bSwKICAgICAgICAgICAgdHlwZU5hbWU6IHN0b3JlLnN0YXRlLnR5cGVOYW1lLAogICAgICAgICAgICB0eXBlTnVtOiBzdG9yZS5zdGF0ZS50eXBlTnVtLAogICAgICAgICAgICBza2lwOiBmYWxzZSwKICAgICAgICAgICAgZm9yZ2V0OiBmYWxzZQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/liIblspDjg47jg7zjg4kKICAgICAgICB2YXIgbm9kZUxhYmVsOwogICAgICAgIHZhciBub2RlSWQ7CgogICAgICAgIGlmICh0eXBlID09ICdjdXN0b21Nb3RpdmF0aW9uJykgewogICAgICAgICAgbm9kZUxhYmVsID0gJ+awl+WQiOOBhCc7CiAgICAgICAgICBub2RlSWQgPSBtdl9nZXRJZCgpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnY3VzdG9tU2Vhc29uJykgewogICAgICAgICAgbm9kZUxhYmVsID0gJ+Wto+evgCc7CiAgICAgICAgICBub2RlSWQgPSBzX2dldElkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG5vZGVMYWJlbCA9ICflpJblh7rmmYLplpMnOwogICAgICAgICAgbm9kZUlkID0gdF9nZXRJZCgpOwogICAgICAgIH0KCiAgICAgICAgbmV3Tm9kZSA9IHsKICAgICAgICAgIGlkOiBub2RlSWQsCiAgICAgICAgICB0eXBlLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICBsYWJlbDogbm9kZUxhYmVsLAogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgIi0tdmYtbm9kZS1jb2xvciI6ICdibGFjaycKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBhZGROb2RlcyhbbmV3Tm9kZV0pOwogICAgfTsKCiAgICBjb25zdCBzdWJtaXRGbG93Y2hhcnQgPSAoKSA9PiB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCLjg4fjg7zjgr/jga7jg4Djgqbjg7Pjg63jg7zjg4km5a6f6aiT57WC5LqGIikKICAgICAgLy/jg5Xjg63jg7zjg4Hjg6Pjg7zjg4jjg4fjg7zjgr/jga7jg4Djgqbjg7Pjg63jg7zjg4kKICAgICAgY29uc29sZS5sb2coc3RvcmUuc3RhdGUuZG93bmxvYWREYXRhLmluZGV4T2YoImpzb24iKSk7CiAgICAgIGNvbnNvbGUubG9nKHN0b3JlLnN0YXRlLmRvd25sb2FkRGF0YS5pbmRleE9mKCJzdmciKSk7CgogICAgICBpZiAoc3RvcmUuc3RhdGUuZG93bmxvYWREYXRhLmluZGV4T2YoImpzb24iKSAhPSAtMSkgewogICAgICAgIGNvbnN0IGZpbGVOYW1lMiA9IHN0b3JlLnN0YXRlLnVzZXJOYW1lICsgIi5qc29uIjsKICAgICAgICBjb25zdCBmbG93RGF0YTIgPSBKU09OLnN0cmluZ2lmeSh0b09iamVjdCgpKTsKICAgICAgICBjb25zdCBsaW5rMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBsaW5rMi5ocmVmID0gImRhdGE6dGV4dC9wbGFpbiwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZsb3dEYXRhMik7CiAgICAgICAgbGluazIuZG93bmxvYWQgPSBmaWxlTmFtZTI7CiAgICAgICAgbGluazIuY2xpY2soKTsKICAgICAgfSAvL+ODleODreODvOODgeODo+ODvOODiOeUu+WDj+OBruODgOOCpuODs+ODreODvOODiQoKCiAgICAgIGlmIChzdG9yZS5zdGF0ZS5kb3dubG9hZERhdGEuaW5kZXhPZigic3ZnIikgIT0gLTEpIHsKICAgICAgICBodG1sVG9JbWFnZS50b1N2Zyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudnVlLWZsb3dfX2NvbnRhaW5lcicpKS50aGVuKGZ1bmN0aW9uIChkYXRhVXJsMikgewogICAgICAgICAgLy8g56eB44Gu5aC05ZCI44Gv44OA44Km44Oz44Ot44O844OJ5Yem55CG44KS5a6f6KGMCiAgICAgICAgICBjb25zdCBhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgIGEyLmRvd25sb2FkID0gc3RvcmUuc3RhdGUudXNlck5hbWUgKyAnLnN2Zyc7CiAgICAgICAgICBhMi5ocmVmID0gZGF0YVVybDI7CiAgICAgICAgICBhMi5jbGljaygpOwogICAgICAgIH0pOwogICAgICB9IC8v5a6f6aiT57WC5LqG55S76Z2i44G456e75YuVCgoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgcm91dGVyLnB1c2goJy9maW5pc2gnKTsKICAgICAgfSwgMTAwMCk7CiAgICB9OwoKICAgIGNvbnN0IF9fcmV0dXJuZWRfXyA9IHsKICAgICAgb25QYW5lUmVhZHksCiAgICAgIG9uQ29ubmVjdCwKICAgICAgb25FZGdlc0NoYW5nZSwKICAgICAgb25Ob2Rlc0NoYW5nZSwKICAgICAgYWRkRWRnZXMsCiAgICAgIGFkZE5vZGVzLAogICAgICB0b09iamVjdCwKICAgICAgcHJvamVjdCwKICAgICAgZ2V0Tm9kZSwKICAgICAgZ2V0RWRnZSwKICAgICAgZWxlbWVudHMsCiAgICAgIG5vZGVUeXBlcywKICAgICAgc3RvcmUsCiAgICAgIHJvdXRlciwKICAgICAgU2tleXMsCiAgICAgIGVkZ2VTTnVtLAogICAgICBtYWtlTm9kZU51bSwKICAgICAgb3B0aW9ucywKICAgICAgdnVlQ29udGV4dE1lbnUsCiAgICAgIGhhbmRsZUNsaWNrLAogICAgICBzZWxlY3RNZW51LAogICAgICBvcHRpb25DbGlja2VkLAogICAgICBvbkxvYWQsCiAgICAgIHN1cnZleVNhbWVTb3VyY2UsCiAgICAgIGNoYW5nZUVkZ2VzLAogICAgICBjaGFuZ2VNYWtlTm9kZXMsCiAgICAgIGNoZWNrT3V0cHV0LAogICAgICBvbkRyYWdPdmVyLAogICAgICBpZCwKICAgICAgc3NfZ2V0SWQsCiAgICAgIG1fZ2V0SWQsCiAgICAgIG12X2dldElkLAogICAgICBzX2dldElkLAogICAgICB0X2dldElkLAogICAgICBvbkRyb3AsCiAgICAgIHN1Ym1pdEZsb3djaGFydCwKICAgICAgQmFja2dyb3VuZCwKICAgICAgQ29udHJvbHMsCiAgICAgIE1pbmlNYXAsCiAgICAgIFZ1ZUZsb3csCiAgICAgIGlzTm9kZSwKICAgICAgaXNFZGdlLAogICAgICBNYXJrZXJUeXBlLAogICAgICBDb25uZWN0aW9uTW9kZSwKICAgICAgdXNlVnVlRmxvdywKICAgICAgbWFya1JhdywKICAgICAgcmVmLAogICAgICB1c2VTdG9yZSwKICAgICAgdXNlUm91dGVyLAogICAgICBpbml0aWFsRWxlbWVudHMsCiAgICAgIE1ha2VOb2RlLAogICAgICBNb3RpdmF0aW9uTm9kZSwKICAgICAgU2Vhc29uTm9kZSwKICAgICAgVGltZU5vZGUsCiAgICAgIE5vZGVTZXR0aW5ncywKICAgICAgRmFjZUltYWdlLAogICAgICBOb2RlRmllbGQsCiAgICAgIFRvcE1lbnUsCiAgICAgIFZ1ZVNpbXBsZUNvbnRleHRNZW51LAogICAgICBodG1sVG9JbWFnZQogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KCn07"},{"version":3,"mappings":"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","names":["Background","Controls","MiniMap","VueFlow","isNode","isEdge","MarkerType","ConnectionMode","useVueFlow","markRaw","ref","useStore","useRouter","initialElements","MakeNode","MotivationNode","SeasonNode","TimeNode","NodeSettings","FaceImage","NodeField","TopMenu","VueSimpleContextMenu","htmlToImage","onPaneReady","onConnect","onEdgesChange","onNodesChange","addEdges","addNodes","toObject","project","getNode","getEdge","elements","nodeTypes","customMake","customMotivation","customSeason","customTime","store","router","Skeys","edgeSNum","makeNodeNum","options","name","slug","vueContextMenu","handleClick","event","Object","defineProperty","value","pageX","writable","pageY","showMenu","selectMenu","params","commit","nodes","optionClicked","copyNode","copyNodesData","state","selectnodeList","s","length","copyNodeData","type","id","ss_getId","position","x","y","label","m_getId","style","data","mv_getId","s_getId","t_getId","fitView","onLoad","flowInstance","surveySameSource","source","includes","temp2","changeEdges","edge","eid","keys","push","sameEdgeSNum","j","splice","changeMakeNodes","nodeData","imgNum","lengthNum","n","l","tempLengthNum","imgState","checkOutput","inputNode","outputNode","forEach","el","input","output","inputN","outputN","alert","q","item","nodeitems","partNum","itemNum","typeNum","indexOf","rnode","rdata","snode","selected","turn","NumOfSameSources","i","edgeItem","edgeData","sedge","animated","NumOfEdge","newEdge","getEdgeId","target","stroke","markerEnd","ArrowClosed","addEdgeLabel","addEdgeColor","addEdgeType","labelStyle","fill","labelBgStyle","onDragOver","preventDefault","dataTransfer","dropEffect","onDrop","getData","clientX","clientY","newNode","itemName","typeName","partName","skip","forget","nodeLabel","nodeId","submitFlowchart","console","log","downloadData","fileName2","userName","flowData2","JSON","stringify","link2","document","createElement","href","encodeURIComponent","download","click","toSvg","querySelector","then","dataUrl2","a2","setTimeout"],"sources":["/Users/takanosayaka/Documents/GitHub/makeup_flowchart_vue3_test/src/views/Flowchart.vue"],"sourcesContent":["<script setup>\nimport { Background, Controls, MiniMap, VueFlow, isNode, isEdge, MarkerType, ConnectionMode, useVueFlow } from '@braks/vue-flow'\nimport { markRaw, ref, } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { initialElements } from '../js/initial-elements.js'\n//\nimport MakeNode from '@/components/MakeNode.vue'\nimport MotivationNode from '@/components/MotivationNode.vue'\nimport SeasonNode from '@/components/SeasonNode.vue'\nimport TimeNode from '@/components/TimeNode.vue'\n//\nimport NodeSettings from '@/components/NodeSettings.vue'\nimport FaceImage from '@/components/FaceImage.vue'\nimport NodeField from '@/components/NodeField.vue'\nimport TopMenu from '@/components/TopMenu.vue'\n//\nimport VueSimpleContextMenu from 'vue-simple-context-menu'\nimport * as htmlToImage from \"html-to-image\"\n\n//\n/* vue-flow */\nconst { onPaneReady, onConnect, onEdgesChange, onNodesChange, addEdges, addNodes, toObject, project, getNode, getEdge, } = useVueFlow()\nconst elements = ref(initialElements)\nconst nodeTypes = {\n  customMake: markRaw(MakeNode),\n  customMotivation: markRaw(MotivationNode),\n  customSeason: markRaw(SeasonNode),\n  customTime: markRaw(TimeNode),\n}\n/* storerouter */\nconst store = useStore()\nconst router = useRouter()\n/*  */\nvar Skeys = [] //source\nvar edgeSNum = [] //sourceedge source:[id]\nvar makeNodeNum = {0: [], 1: [], 2: [], 3: [], 4: [], 5: [], 6: [], 7: []} //imgNum:[id]\n/* vue-simple-context-menu */\nconst options = [{name: \"Copy\", slug: \"copy\"}]\nconst vueContextMenu = ref(initialElements)\n\n\n/* vue-simple-context-menu */\nconst handleClick =  (event) => {\n  // overwrite readonly properties pageX and pageY and set correct values\n  Object.defineProperty(event, 'pageX', {\n    value: event.pageX - 350,\n    writable: true\n  })\n  Object.defineProperty(event, 'pageY', {\n    value: event.pageY - 100, //event.pageY - 100\n    writable: true\n  })\n  vueContextMenu.value.showMenu(event)\n}\n//\nconst selectMenu = (params) => {\n  store.commit(\"setSelectNodeList\", params.nodes)\n}\n//\nconst optionClicked = () => {\n  var copyNode\n  var copyNodesData = store.state.selectnodeList\n  for(var s=0; s<copyNodesData.length; s++){\n    var copyNodeData = store.state.selectnodeList[s]\n    if(copyNodeData.type == 'input' || copyNodeData.type == 'output'){\n      //\n      //\n      copyNode = {\n        id: ss_getId(),\n        type: copyNodeData.type,\n        position: project({ x: copyNodeData.position.x + 100, y: copyNodeData.position.y + 100 }),\n        label: copyNodeData.label,\n      }\n    }else if(copyNodeData.type == 'customMake'){\n      //\n      copyNode = {\n        id: m_getId(),\n        type: copyNodeData.type,\n        position: project({ x: copyNodeData.position.x + 100, y: copyNodeData.position.y + 100 }),\n        label: copyNodeData.label,\n        style: copyNodeData.style,\n        data: copyNodeData.data,\n      }\n    }else{\n      //\n      copyNode = {\n        id: copyNodeData.type == 'customMotivation'\n          ? mv_getId()\n          : copyNodeData.type == 'customSeason'\n            ? s_getId()\n            : t_getId(),\n        type: copyNodeData.type,\n        position: project({ x: copyNodeData.position.x + 100, y: copyNodeData.position.y + 100 }),\n        label: copyNodeData.label,\n        style: copyNodeData.style,\n      }\n    }\n    addNodes([copyNode])\n  }\n}\n\n/*  */\n//onPaneReadyviewpane\nonPaneReady(({fitView}) => {\n  fitView()\n})\nconst onLoad = (flowInstance) => flowInstance.fitView()\n\n/*  */\n//(return)\nconst surveySameSource = (source) => {\n  if(Skeys.includes(source)){\n    var temp2 = edgeSNum[source]\n    return temp2.length\n  }else{\n    return 0\n  }\n}\n///SkeysedgeSNum\nconst changeEdges = (edge, type) => {\n  //\n  var eid = edge.id\n  var source = edge.source\n  //Skeys\n  Skeys = Object.keys(edgeSNum)\n  if(type == \"add\"){\n    // console.log(\"edgeSNum()\")\n    if(Skeys.includes(source)){\n      edgeSNum[source].push(eid)\n    }else{\n      edgeSNum[source] = []\n      edgeSNum[source].push(eid)\n      Skeys = Object.keys(edgeSNum)\n    }\n  }else if(type == \"remove\"){\n    // console.log(\"edgeSNum()\")\n    var sameEdgeSNum = edgeSNum[source]\n    if(sameEdgeSNum.length >= 2){\n      for(var j=0; j<sameEdgeSNum.length; j++){\n        if(sameEdgeSNum[j] == eid){\n          edgeSNum[source].splice(j, 1)\n        }\n      }\n    }else{\n      delete edgeSNum[source]\n      Skeys = Object.keys(edgeSNum)\n    }\n  }else if(type == \"change\"){\n    // console.log(\"edgeSNum()\")\n  }else{\n    return\n  }\n}\n///makeNodeNum\nconst changeMakeNodes = (nodeData) => {\n  if(nodeData.type == \"add\"){\n    makeNodeNum[nodeData.imgNum].push(nodeData.id)\n  }else if(nodeData.type == \"remove\"){\n    var lengthNum = makeNodeNum[nodeData.imgNum]\n    for(var n=0; n<lengthNum.length; n++){\n      if(lengthNum[n] == nodeData.id){\n        makeNodeNum[nodeData.imgNum].splice(n, 1)\n      }\n    }\n  }else{\n    return\n  }\n\n  ///\n  for(var l=0; l<Object.keys(makeNodeNum).length; l++){\n    var tempLengthNum = makeNodeNum[l]\n    if(tempLengthNum.length >= 1){\n      store.commit(\"setMakeNodeList\", {imgNum:l, imgState: true})\n    }else{\n      store.commit(\"setMakeNodeList\", {imgNum:l, imgState: false})\n    }\n  }\n}\n//turn2\nconst checkOutput = () => {\n  var inputNode = false\n  var outputNode = false\n  elements.value.forEach((el) => {\n    if (isNode(el)) {\n      if(el.type == \"input\"){\n        inputNode = true\n      }else if(el.type == \"output\"){\n        outputNode = true\n      }\n    }\n  })\n  store.commit(\"setInOutput\", {input: inputNode, output: outputNode})\n  if(!store.state.inputN || !store.state.outputN){\n    alert(\"\")\n    return\n  }\n}\n\n/*  */\nonNodesChange((params) => {\n  //type: dimensions(/), select, add, remove\n  //params add:[type, item{}] remove:[type, id] select:[type, id, selected]\n  for(var q=0; q<params.length; q++){\n    if(params[q].type == \"add\"){\n      // console.log(\"\")\n      //\n      if(params[q].item.type == \"customMake\"){\n        var nodeitems = params[q].item\n        var nodeData = nodeitems.data\n        //\n        if(nodeData.partNum == 1 && nodeData.itemNum == 8){\n          changeMakeNodes({imgNum: 0, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 1 && nodeData.itemNum == 8 && nodeData.typeNum == 2){\n          changeMakeNodes({imgNum: 1, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 2 && nodeData.itemNum == 11){\n          changeMakeNodes({imgNum: 2, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 2 && (13 <= nodeData.itemNum && nodeData.itemNum <= 16)){\n          changeMakeNodes({imgNum: 3, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 2 && (17 <= nodeData.itemNum && nodeData.itemNum <= 20)){\n          changeMakeNodes({imgNum: 4, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 4 && nodeData.itemNum == 24){\n          changeMakeNodes({imgNum: 5, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 4 && nodeData.itemNum == 25){\n          changeMakeNodes({imgNum: 6, id: nodeitems.id, type: \"add\"})\n        }else if(nodeData.partNum == 0 && nodeData.itemNum == 22){\n          changeMakeNodes({imgNum: 7, id: nodeitems.id, type: \"add\"})\n        }else{\n          return\n        }\n      }\n    }else if(params[q].type == \"remove\"){\n      // console.log(\"\")\n      if(params[q].id.indexOf('make') > -1){ //\n        const rnode = getNode.value(params[q].id)\n        const rdata = rnode.data\n        if(rdata.partNum == 1 && rdata.itemNum == 8){\n          changeMakeNodes({imgNum: 0, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 1 && rdata.itemNum == 8 && rdata.typeNum == 2){\n          changeMakeNodes({imgNum: 1, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 2 && rdata.itemNum == 11){\n          changeMakeNodes({imgNum: 2, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 2 && (13 <= rdata.itemNum && rdata.itemNum <= 16)){\n          changeMakeNodes({imgNum: 3, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 2 && (17 <= rdata.itemNum && rdata.itemNum <= 20)){\n          changeMakeNodes({imgNum: 4, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 4 && rdata.itemNum == 24){\n          changeMakeNodes({imgNum: 5, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 4 && rdata.itemNum == 25){\n          changeMakeNodes({imgNum: 6, id: params[q].id, type: \"remove\"})\n        }else if(rdata.partNum == 0 && rdata.itemNum == 22){\n          changeMakeNodes({imgNum: 7, id: params[q].id, type: \"remove\"})\n        }else{\n          return\n        }\n      }\n    }else if(params[q].type == \"select\"){\n      var snode\n      if(params[q].id.indexOf('make') > -1 || params[q].id.indexOf('branch') > -1){\n        //\n        snode = getNode.value(params[q].id)\n        if(params[q].selected){\n          snode.style[\"--vf-node-color\"] = '#3cb371'\n        }else{\n          snode.style[\"--vf-node-color\"] = 'black'\n        }\n      }\n      if(store.state.turn == 2){\n        if(params[q].id.indexOf('make') > -1){\n          //\n          if(params[q].selected){\n            if(!snode.data[\"skip\"]){\n              //skipfalse\n              snode.style[\"--vf-node-text\"] = '#ff8c00'\n              snode.data[\"skip\"] = true\n            }else{\n              //skiptrue\n              snode.style[\"--vf-node-text\"] = 'black'\n              snode.data[\"skip\"] = false\n            }\n          }\n        }\n      }else if(store.state.turn == 3){\n        if(params[q].id.indexOf('make') > -1){\n          //\n          if(params[q].selected){\n            if(!snode.data[\"forget\"]){\n              //forgetfalse\n              snode.style[\"--vf-node-bg\"] = \"pink\"\n              snode.data[\"forget\"] = true\n            }else{\n              //forgettrue\n              snode.style[\"--vf-node-bg\"] = \"white\"\n              snode.data[\"forget\"] = false\n            }\n          }\n        }\n      }\n    }\n    else{\n      return\n    }\n  }\n})\n/*  */\nonEdgesChange((params) => {\n  var NumOfSameSources\n  //params add:[type, item{}]  remove:[type, id]  select:[type, id, selected]\n  for(var i=0; i<params.length; i++){\n    if(params[i].type == \"add\"){\n      var edgeItem = params[i].item\n      //edgeSNum\n      Skeys = Object.keys(edgeSNum) //\n      if(Skeys.includes(edgeItem.source)){\n        edgeSNum[edgeItem.source].push(edgeItem.id)\n      }else{\n        edgeSNum[edgeItem.source] = []\n        edgeSNum[edgeItem.source].push(edgeItem.id)\n        Skeys = Object.keys(edgeSNum)\n      }\n      //source\n      NumOfSameSources = surveySameSource(edgeItem.source)\n      //1smoothstep\n      if(NumOfSameSources >= 1){\n        elements.value.forEach((el) => {\n          if (isEdge(el) && el.source == edgeItem.source) {\n            el.type = 'smoothstep'\n          }\n        })\n      }\n    }else if(params[i].type == \"remove\"){\n      var source\n      var edgeData\n      //source\n      elements.value.forEach((el) => {\n        if (el.id == params[i].id) {\n          edgeData = el\n          source = el.source\n          NumOfSameSources = surveySameSource(source)\n        }\n      })\n      //2straight\n      if(NumOfSameSources == 2){\n        elements.value.forEach((el) => {\n          if (isEdge(el) && el.source == source) {\n            el.type = 'straight'\n          }\n        })\n      }\n      //edgeList\n      changeEdges(edgeData, \"remove\")\n    }else if(params[i].type == \"select\"){\n      var sedge = getEdge.value(params[i].id)\n      if(params[i].selected){\n        sedge.animated = true\n        //turn2id\n        if(store.state.turn == 2){\n          store.commit(\"setEdgeId\", params[i].id)\n        }\n      }else{\n        sedge.animated = false\n        //turn2id\n        if(store.state.turn == 2){\n          store.commit(\"setEdgeId\", \"\")\n        }\n      }\n    }else{\n      return\n    }\n  }\n})\n/*  onConnect->onEdgesChange */\nonConnect((params) => {\n  // console.log(\"\")\n  //params:[source, sourceHandle, target, targetHandle]\n\n  //\n  var NumOfEdge\n  Skeys = Object.keys(edgeSNum)\n  if(Skeys.includes(params.source)){\n    NumOfEdge = surveySameSource(params.source) +1\n  }else{\n    NumOfEdge = 1\n  }\n\n  //\n  var newEdge\n  const getEdgeId = () => `e${params.source}_${params.target}`\n  if(NumOfEdge < 3){\n    if(params.source.indexOf('make') > -1){\n      //customMake\n      if(NumOfEdge < 2){\n        newEdge = {\n          id: getEdgeId(),\n          source: params.source,\n          target: params.target,\n          type: 'straight',\n          style: { stroke: 'black' },\n          markerEnd: MarkerType.ArrowClosed,\n          animated: false,\n        }\n      }else{\n        //1\n        alert(\"11.\")\n        return\n      }\n    }else if(params.source.indexOf('branch') > -1){\n      //customBranch\n      var addEdgeLabel\n      var addEdgeColor\n      var addEdgeType\n      if(params.source.indexOf('mvbranch') > -1){\n        //\n        addEdgeLabel = NumOfEdge%2 == 0 ? '' : ''\n        addEdgeColor = NumOfEdge%2 == 0 ? 'blue' : 'red'\n        addEdgeType = NumOfEdge%2 == 0 ? 'no' : 'max'\n      }else if(params.source.indexOf('sbranch') > -1){\n        //\n        addEdgeLabel = NumOfEdge%2 == 0 ? '' : ''\n        addEdgeColor = NumOfEdge%2 == 0 ? 'gray' : 'blue'\n        addEdgeType = NumOfEdge%2 == 0 ? 'winter' : 'summer'\n      }else{\n        //\n        addEdgeLabel = NumOfEdge%2 == 0 ? '' : ''\n        addEdgeColor = NumOfEdge%2 == 0 ? 'blue' : 'red'\n        addEdgeType = NumOfEdge%2 == 0 ? 'short' : 'long'\n      }\n      newEdge = {\n        id: getEdgeId(),\n        source: params.source,\n        target: params.target,\n        type: NumOfEdge>1 ? 'smoothstep' : 'straight',\n        label: addEdgeLabel,\n        style: { stroke: addEdgeColor },\n        labelStyle: { fill: 'white' },\n        labelBgStyle: { fill: addEdgeColor },\n        markerEnd: MarkerType.ArrowClosed,\n        animated: false,\n        data: {\n          type: addEdgeType\n        },\n      }\n    }else{\n      //input/output\n      if(NumOfEdge < 2){\n        newEdge = {\n          id: getEdgeId(),\n          source: params.source,\n          target: params.target,\n          type: 'straight',\n          style: { stroke: 'black' },\n          markerEnd: MarkerType.ArrowClosed,\n          animated: false,\n        }\n      }else{\n        //1\n        alert(\"1/1.\")\n        return\n      }\n    }\n  }else{\n    //3\n    alert(\"12.\")\n    return\n  }\n  addEdges([newEdge])\n})\n\n/*  */\n//\nconst onDragOver = (event) => {\n  event.preventDefault()\n  if (event.dataTransfer) {\n    event.dataTransfer.dropEffect = 'move'\n  }\n}\n//\nlet id = 0\nconst ss_getId = () => `ss_${id++}`\nconst m_getId = () => `make_${id++}`\nconst mv_getId = () => `mvbranch_${id++}`\nconst s_getId = () => `sbranch_${id++}`\nconst t_getId = () => `tbranch_${id++}`\nconst onDrop = (event) => {\n  const type = event.dataTransfer?.getData('application/vueflow')\n  const position = project({ x: event.clientX - 400, y: event.clientY - 150 })\n  var newNode\n  if(type == 'input' || type == 'output'){\n    //\n    newNode = {\n      id: ss_getId(), type, position,\n      label: type == 'input' ? '' : '',\n    }\n  }else if(type == 'customMake'){\n    //\n    newNode = {\n      id: m_getId(),\n      type, position,\n      label: store.state.itemName.length >= 7\n        ? store.state.itemName+'\\n('+store.state.typeName+')'\n        : store.state.itemName+'('+store.state.typeName+')',\n      style: { \"--vf-node-color\": 'black' },\n      data: {\n        partName: store.state.partName,\n        partNum: store.state.partNum,\n        itemName: store.state.itemName,\n        itemNum: store.state.itemNum,\n        typeName: store.state.typeName,\n        typeNum: store.state.typeNum,\n        skip: false,\n        forget: false,\n      }\n    }\n  }else{\n    //\n    var nodeLabel\n    var nodeId\n    if(type == 'customMotivation'){\n      nodeLabel = ''\n      nodeId = mv_getId()\n    }else if(type == 'customSeason'){\n      nodeLabel = ''\n      nodeId = s_getId()\n    }else{\n      nodeLabel = ''\n      nodeId = t_getId()\n    }\n    newNode = {\n      id: nodeId,\n      type, position,\n      label: nodeLabel,\n      style: { \"--vf-node-color\": 'black' },\n    }\n  }\n  addNodes([newNode])\n}\n\nconst submitFlowchart = () => {\n  // console.log(\"&\")\n  //\n  console.log(store.state.downloadData.indexOf(\"json\"))\n  console.log(store.state.downloadData.indexOf(\"svg\"))\n  if(store.state.downloadData.indexOf(\"json\") != -1){\n    const fileName2 = store.state.userName+\".json\"\n    const flowData2 = JSON.stringify(toObject())\n    const link2 = document.createElement(\"a\")\n    link2.href = \"data:text/plain,\" + encodeURIComponent(flowData2)\n    link2.download = fileName2\n    link2.click()\n  }\n  //\n  if(store.state.downloadData.indexOf(\"svg\") != -1){\n    htmlToImage.toSvg(document.querySelector('.vue-flow__container'))\n    .then(function (dataUrl2) {\n      // \n      const a2 = document.createElement('a')\n      a2.download = store.state.userName+'.svg'\n      a2.href = dataUrl2\n      a2.click()\n    })\n  }\n  //\n  setTimeout(function(){\n    router.push('/finish')\n  }, 1000)\n}\n</script>\n\n<template>\n  <TopMenu @submitObject=\"submitFlowchart\" @checkTurn1=\"checkOutput\" />\n  <div class=\"dndflow\" @drop=\"onDrop\">\n    <div class=\"sidemenu\">\n      <FaceImage />\n      <NodeSettings />\n      <NodeField />\n    </div>\n    <VueFlow\n      class=\"basicflow\" v-model=\"elements\"\n      :node-types=\"nodeTypes\" :default-zoom=\"1.5\" :min-zoom=\"0.2\" :max-zoom=\"4\"\n      :fit-view-on-init=\"true\" :snap-to-grid=\"true\" :connection-mode=\"ConnectionMode.Loose\"\n      @dragover=\"onDragOver\" @pane-ready=\"onLoad\" @selection-context-menu=\"selectMenu\"\n      @contextmenu.prevent.stop=\"handleClick($event)\"\n    >\n      <Background pattern-color=\"#000000\" gap=\"8\" />\n      <MiniMap />\n      <Controls />\n      <!---->\n      <template #node-Make=\"props\">\n        <MakeNode v-bind=\"props\" />\n      </template>\n      <template #node-Motivation=\"props\">\n        <MotivationNode v-bind=\"props\" />\n      </template>\n      <template #node-Season=\"props\">\n        <SeasonNode v-bind=\"props\" />\n      </template>\n      <template #node-Time=\"props\">\n        <TimeNode v-bind=\"props\" />\n      </template>\n      <!--context-menu-->\n      <vue-simple-context-menu\n        element-id=\"myUniqueId\"\n        :options=\"options\"\n        ref=\"vueContextMenu\"\n        @option-clicked=\"optionClicked\"\n      />\n    </VueFlow>\n  </div>\n</template>\n\n<style>\n@import '../css/flowchart.css';\n@import '../css/vue-simple-context-menu.css';\n</style>"]}]}